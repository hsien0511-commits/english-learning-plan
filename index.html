<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小英雄英語 12 週挑戰</title>
    <style>
        :root { --p: #2c3e50; --a: #3498db; --s: #27ae60; --bg: #f8f9fa; }
        body { font-family: 'PingFang TC', sans-serif; background: var(--bg); margin: 0; display: flex; color: var(--p); }
        #sidebar { width: 320px; background: var(--p); color: white; height: 100vh; overflow-y: auto; padding: 20px; box-sizing: border-box; }
        #main { flex: 1; padding: 40px; height: 100vh; overflow-y: auto; box-sizing: border-box; }
       .progress-container { background: #444; height: 12px; border-radius: 6px; margin: 15px 0; overflow: hidden; }
        #progress-bar { height: 100%; background: var(--s); width: 0%; transition: 0.5s; }
       .week-head { background: rgba(255,255,255,0.1); padding: 8px 12px; margin: 15px 0 5px; border-radius: 4px; font-weight: bold; font-size: 0.9em; }
       .vid-item { padding: 10px; cursor: pointer; border-radius: 4px; font-size: 0.85em; display: flex; align-items: center; margin-bottom: 2px; }
       .vid-item:hover { background: rgba(255,255,255,0.05); }
       .vid-item.done { color: var(--s); }
       .vid-item.active { background: var(--a); color: white; }
       .check { margin-right: 8px; width: 14px; height: 14px; border: 1px solid #777; border-radius: 50%; display: inline-block; }
       .done.check { background: var(--s); border-color: var(--s); }
       .card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
       .v-wrap { position: relative; padding-bottom: 56.25%; height: 0; margin-bottom: 25px; border-radius: 8px; overflow: hidden; background: #000; }
       .v-wrap iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
       .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 25px; }
       .box { padding: 20px; border: 1px solid #eee; border-radius: 8px; }
       .box h3 { margin: 0 0 15px; font-size: 1.1em; color: var(--a); border-bottom: 2px solid var(--a); display: inline-block; }
       .box ul,.box ol { padding-left: 20px; line-height: 1.8; }
       .btn-done { background: var(--s); color: white; border: none; padding: 12px 25px; border-radius: 6px; cursor: pointer; font-size: 1em; width: 100%; margin-top: 20px; font-weight: bold; }
       .btn-done:disabled { background: #ccc; cursor: not-allowed; }
    </style>
</head>
<body>

<div id="sidebar">
    <h2 style="margin:0">學習紀錄</h2>
    <div id="stats" style="font-size:0.8em; margin-top:10px;">總進度: <span id="percent">0</span>%</div>
    <div class="progress-container"><div id="progress-bar"></div></div>
    <div id="list"></div>
</div>

<div id="main">
    <div id="empty" class="card" style="text-align:center; padding:100px 20px;">
        <h2 style="color:#7f8c8d">點擊左側列表開始今天的冒險！</h2>
        <p>每天完成一個任務，成為英文小達人。</p>
    </div>
    <div id="app" class="card" style="display:none">
        <h2 id="v-title" style="margin-top:0"></h2>
        <div class="v-wrap" id="v-player"></div>
        <div class="grid">
            <div class="box">
                <h3>5個核心單字</h3>
                <ul id="v-words"></ul>
            </div>
            <div class="box">
                <h3>3句挑戰句</h3>
                <ol id="v-sents"></ol>
            </div>
        </div>
        <button class="btn-done" id="btn-submit" onclick="completeTask()">完成今日挑戰！</button>
    </div>
</div>

<script>
    // 數據存儲：12週共60部影片 (為節省長度，此處僅展示數據結構，實際需補齊60筆)
    const plan =, st: ["Living things need to breathe.", "A rock cannot grow.", "All living things change over time."] },
            { id: "tkFPyue5X3Q", s: 30, t: "D2: 植物的成長", w:, st: },
            { id: "Xk4-6II8l5Q", s: 60, t: "D3: 落葉的顏色", w:, st: },
            { id: "Q-J2FErZHuA", s: 45, t: "D4: 土壤的秘密", w:, st: },
            { id: "6L_p3ZkSlLo", s: 75, t: "D5: 食蟲植物", w:, st: }
        ]},
        { week: 2, name: "海洋世界", vids:, st: },
            { id: "T8Wp2yWH_3E", s: 40, t: "D7: 企鵝家族", w:, st: },
            { id: "fHVE4B-UjmM", s: 60, t: "D8: 海洋分層", w:, st: },
            { id: "hREPV58WNp0", s: 30, t: "D9: 聰明海豚", w:, st: },
            { id: "A7LU5Wxc_0Y", s: 60, t: "D10: 奇怪深海魚", w:, st: }
        ]}
        //... 此處請根據第四章表格補齊後續10週數據
    ];

    let history = JSON.parse(localStorage.getItem('study_logs')) ||;
    let activeId = -1;

    function renderList() {
        let h = ''; let count = 0;
        plan.forEach((wk, wi) => {
            h += `<div class="week-head">Week ${wk.week}: ${wk.name}</div>`;
            wk.vids.forEach((v, vi) => {
                const gid = count++;
                const isDone = history.includes(gid)? 'done' : '';
                h += `<div class="vid-item ${isDone}" id="v-${gid}" onclick="openVid(${wi},${vi},${gid})"><span class="check"></span>${v.t}</div>`;
            });
        });
        document.getElementById('list').innerHTML = h;
        updateProgress(count);
    }

    function openVid(wi, vi, gid) {
        activeId = gid;
        const d = plan[wi].vids[vi];
        document.getElementById('empty').style.display = 'none';
        document.getElementById('app').style.display = 'block';
        document.getElementById('v-title').innerText = d.t;
        document.getElementById('v-player').innerHTML = `<iframe src="https://www.youtube.com/embed/${d.id}?start=${d.s}&autoplay=1" allowfullscreen></iframe>`;
        document.getElementById('v-words').innerHTML = d.w.map(x => `<li><b>${x}</b></li>`).join('');
        document.getElementById('v-sents').innerHTML = d.st.map(x => `<li>${x}</li>`).join('');
        
        document.querySelectorAll('.vid-item').forEach(e => e.classList.remove('active'));
        document.getElementById(`v-${gid}`).classList.add('active');
        document.getElementById('btn-submit').disabled = history.includes(gid);
    }

    function completeTask() {
        if (activeId!== -1 &&!history.includes(activeId)) {
            history.push(activeId);
            localStorage.setItem('study_logs', JSON.stringify(history));
            document.getElementById(`v-${activeId}`).classList.add('done');
            document.getElementById('btn-submit').disabled = true;
            updateProgress(60);
        }
    }

    function updateProgress(total) {
        let p = Math.round((history.length / total) * 100);
        document.getElementById('percent').innerText = p;
        document.getElementById('progress-bar').style.width = p + '%';
    }

    renderList();
</script>
</body>
</html>